<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="author" content="Karen Blocksom" />

<meta name="date" content="2018-08-03" />

<title>Calculating Fish Metrics</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>



<link href="data:text/css;charset=utf-8,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23header%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%20code%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" rel="stylesheet" type="text/css" />

</head>

<body>




<h1 class="title toc-ignore">Calculating Fish Metrics</h1>
<h4 class="author"><em>Karen Blocksom</em></h4>
<h4 class="date"><em>2018-08-03</em></h4>



<div id="preliminaries" class="section level1">
<h1>1 Preliminaries</h1>
<p>One of the primary goals of this package is to calculate fish metrics as used in the National Rivers and Streams Assessment (NRSA) conducted in 2008-9 and 2013-14 by EPAâ€™s Office of Water. Fish were collected at all sites where present, and the common name, number of individuals, and number of anomalies were recorded in the field. Non-native status was then determined for all taxa on a site-specific basis. For the purposes of calculations, the metrics were broken down into several subsets, depending on which autecology traits were required to calculate them. In addition, if the non-native status is included with input data, the native version of metrics is also calculated, as well as alien species metrics, if desired. There are also separate functions to calculate just the metrics used in the regional multimetric indices (MMIs) and the MMI scores themselves based on metric inputs. This vignette will describe how to use the various functions along with the example datasets provided and the included taxa lists, to obtain the full set of metrics, a subset of metrics based on metric type, and the fish multimetric index used in assigning biological condition.</p>
<p>The functions in this package allow for a great deal of flexibility in terms of input variable names and the taxalist used in calculating metrics. However, the actual values of various traits, and the fish names as used in the taxalist are assumed to match those used in NRSA. This means that some metrics will not calculate correctly if the NRSA taxalist is not used. In addition, the functions assume that data have already been summarized to the level of sample and taxon, and a within-sample distinctness (0/1) already assigned to each taxon, so any steps required to get to this point must be done prior to use of the functions. All taxa in the count data must be included in the taxa list in order to be included in the calculations. Functions will look for specific types of inconsistencies, like missing variables, and either provide a warning or will fail to run, depending on the issue.</p>
<hr />
</div>
<div id="calculating-nrsa-fish-metrics" class="section level1">
<h1>2 Calculating NRSA fish metrics</h1>
<p>There are two main approaches to calculating the fish metrics. One may either calculate all fish metrics at once, which may take a long time with larger datasets, or one may calculate various subsets of metrics. The latter approach may be helpful if only certain metrics are of interest or only certain traits are available. In the first approach, the function <code>calcAllFishMets</code> serves as a wrapper function for a number of metric subset functions. The other approach involves using individual funcions, including <code>calcFishTaxMets</code>, <code>calcFishTolMets</code>, <code>calcFishTrophicMets</code>, <code>calcFishOtherMets</code>, <code>calcFishNativeMets</code>, and/or <code>calcFishAnomMets</code>. The metrics used in regional fish MMIs and the MMIs themselves, can be calculated using the functions <code>calcNRSA_FishMMImets()</code> and <code>calcFishMMI()</code>, respectively.</p>
<div id="all-metrics-at-once" class="section level2">
<h2>2.1 All metrics at once</h2>
<p>Calculate all metrics using the example fish count data included in the package, <code>fishEx</code>, along with the included taxalist, <code>fishTaxa</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(aquamet)

<span class="kw">head</span>(fishEx)</code></pre></div>
<pre><code>##     UID TAXA_ID FINAL_CT ANOM_CT IS_DISTINCT NON_NATIVE
## 1 10000     522       15       0           1          N
## 2 10000     143        1       1           1          Y
## 3 10000     336        9       0           1          N
## 4 10000     380      121       0           1          N
## 5 10000     118       93       2           1          N
## 6 10000     151        8       0           1          N</code></pre>
<p>This example dataset contains all of the necessary variables required to calculate all of the fish metrics. For this dataset, <code>UID</code> identifies individual samples, <code>TAXA_ID</code> identifies the taxon and links to same field in the taxalist, <code>FINAL_CT</code> is the count for the taxon, <code>ANOM_CT</code> is the number of anomalies for a given taxon, <code>IS_DISTINCT</code> is the distinctness, which 0 indicating non-distinct within the sample and 1 distinct, and <code>NON_NATIVE</code> indicates whether the taxon is non-native in this particular site (Y=YES, N=NO).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(fishTaxa)</code></pre></div>
<pre><code>##   PUBLICATION_DATE TAXA_ID     FAM_OR_CLS         FAMILY
## 1       2016-09-13       1   CATOSTOMIDAE   CATOSTOMIDAE
## 2       2016-09-13      10   CATOSTOMIDAE   CATOSTOMIDAE
## 3       2016-09-13     100    ATHERINIDAE    ATHERINIDAE
## 4       2016-09-13     101 GASTEROSTEIDAE GASTEROSTEIDAE
## 5       2016-09-13     102     SALMONIDAE     SALMONIDAE
## 6       2016-09-13     103    ICTALURIDAE    ICTALURIDAE
##              FINAL_NAME       GENUS HABITAT_NRSA HERP ITISTSN MIGR_NRSA
## 1    ALABAMA HOG SUCKER HYPENTELIUM            B       163950         N
## 2 APALACHICOLA REDHORSE   MOXOSTOMA            B       689763         N
## 3      BROOK SILVERSIDE LABIDESTHES            W       166016         N
## 4     BROOK STICKLEBACK      CULAEA            W       166399         N
## 5           BROOK TROUT  SALVELINUS            W       162003         N
## 6        BROWN BULLHEAD    AMEIURUS            B       164043         N
##   REPROD_NRSA TEMP_NRSA TOL_VAL_EMAPW TOLERANCE_NRSA TROPHIC_NRSA VEL_NRSA
## 1           C        WM            NA              S            I        R
## 2           C        WM            NA                           O        O
## 3           O        WM            NA              S            I        O
## 4           G        CL           9.4              T            I        P
## 5           C        CD           1.7              S            C        R
## 6           G        WM           7.3              T            O        O</code></pre>
<p>This is the desired format of the taxalist. All of the necessary traits are included in the taxalist for metric calculation. The variable <code>FAM_OR_CLS</code> is the same as <code>FAMILY</code> and is an artifact from the NRSA 2008-9 study.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">outdf &lt;-<span class="st"> </span><span class="kw">calcAllFishMets</span>(fishEx,fishTaxa,<span class="dt">sampID=</span><span class="kw">c</span>(<span class="st">&quot;UID&quot;</span>), <span class="dt">dist=</span><span class="st">&quot;IS_DISTINCT&quot;</span>,
                            <span class="dt">ct=</span><span class="st">&quot;FINAL_CT&quot;</span>,<span class="dt">anomct=</span><span class="st">'ANOM_CT'</span>,<span class="dt">taxa_id=</span><span class="st">'TAXA_ID'</span>,<span class="dt">tol=</span><span class="st">'TOLERANCE_NRSA'</span>
                            , <span class="dt">tolval=</span><span class="st">'TOL_VAL_EMAPW'</span>, <span class="dt">vel=</span><span class="st">'VEL_NRSA'</span>, <span class="dt">habitat=</span><span class="st">'HABITAT_NRSA'</span>
                            , <span class="dt">trophic=</span><span class="st">'TROPHIC_NRSA'</span>, <span class="dt">migr=</span><span class="st">'MIGR_NRSA'</span>, <span class="dt">nonnat=</span><span class="st">'NON_NATIVE'</span>
                            , <span class="dt">reprod=</span><span class="st">'REPROD_NRSA'</span>, <span class="dt">temp=</span><span class="st">'TEMP_NRSA'</span>, <span class="dt">family=</span><span class="st">'FAMILY'</span>, <span class="dt">genus=</span><span class="st">'GENUS'</span>
                            , <span class="dt">comname=</span><span class="st">'FINAL_NAME'</span>)</code></pre></div>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'ICTAPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'ICTANTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'ICTAPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'CENTPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'CENTNTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'CENTPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'CYPRPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'CYPRNTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'CYPRPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_ICTAPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_ICTANTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_ICTAPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_CENTPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_CENTNTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_CENTPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_CYPRPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_CYPRNTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_CYPRPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## [1] &quot;Done calculating taxonomic metrics.&quot;</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'INTLNTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'INTLPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'INTLPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'MTOLNTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'MTOLPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'MTOLPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NTOLNTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NTOLPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NTOLPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'TOLRNTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'TOLRPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'TOLRPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'WTD_TV'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_INTLNTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_INTLPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_INTLPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_MTOLNTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_MTOLPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_MTOLPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_NTOLNTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_NTOLPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_NTOLPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_TOLRNTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_TOLRPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_TOLRPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_WTD_TV'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_PIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_PTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_TOTLNIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_TOTLNTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'INTLRHEONTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'INTLRHEOPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'INTLRHEOPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'INTLLOTNTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'INTLLOTPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'INTLLOTPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_INTLRHEONTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_INTLRHEOPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_INTLRHEOPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_INTLLOTNTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_INTLLOTPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_INTLLOTPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NTOLBENTNTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NTOLBENTPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NTOLBENTPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_NTOLBENTNTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_NTOLBENTPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_NTOLBENTPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'INTLINVNTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'INTLINVPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'INTLINVPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NTOLINVNTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NTOLINVPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NTOLINVPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_INTLINVNTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_INTLINVPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_INTLINVPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_NTOLINVNTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_NTOLINVPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_NTOLINVPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## [1] &quot;Done calculating tolerance metrics.&quot;</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'INVNTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'INVPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'INVPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'CARNNTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'CARNPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'CARNPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'OMNINTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'OMNIPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'OMNIPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'HERBNTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'HERBPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'HERBPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_INVNTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_INVPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_INVPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_CARNNTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_CARNPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_CARNPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_OMNINTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_OMNIPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_OMNIPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_HERBNTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_HERBPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_HERBPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'BENTINVNTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'BENTINVPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'BENTINVPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_BENTINVNTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_BENTINVPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_BENTINVPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## [1] &quot;Done calculating trophic metrics.&quot;</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, select(empty_base, -SAMPID)):
## Column class mismatch for 'RHEONTAX'. Converting column to class
## 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, select(empty_base, -SAMPID)):
## Column class mismatch for 'RHEOPIND'. Converting column to class
## 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, select(empty_base, -SAMPID)):
## Column class mismatch for 'RHEOPTAX'. Converting column to class
## 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, select(empty_base, -SAMPID)):
## Column class mismatch for 'LOTNTAX'. Converting column to class
## 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, select(empty_base, -SAMPID)):
## Column class mismatch for 'LOTPIND'. Converting column to class
## 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, select(empty_base, -SAMPID)):
## Column class mismatch for 'LOTPTAX'. Converting column to class
## 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, select(empty_base, -SAMPID)):
## Column class mismatch for 'NAT_RHEONTAX'. Converting column to class
## 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, select(empty_base, -SAMPID)):
## Column class mismatch for 'NAT_RHEOPIND'. Converting column to class
## 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, select(empty_base, -SAMPID)):
## Column class mismatch for 'NAT_RHEOPTAX'. Converting column to class
## 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, select(empty_base, -SAMPID)):
## Column class mismatch for 'NAT_LOTNTAX'. Converting column to class
## 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, select(empty_base, -SAMPID)):
## Column class mismatch for 'NAT_LOTPIND'. Converting column to class
## 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, select(empty_base, -SAMPID)):
## Column class mismatch for 'NAT_LOTPTAX'. Converting column to class
## 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, select(empty_base, -SAMPID)):
## Column class mismatch for 'LITHNTAX'. Converting column to class
## 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, select(empty_base, -SAMPID)):
## Column class mismatch for 'LITHPIND'. Converting column to class
## 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, select(empty_base, -SAMPID)):
## Column class mismatch for 'LITHPTAX'. Converting column to class
## 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, select(empty_base, -SAMPID)):
## Column class mismatch for 'NAT_LITHNTAX'. Converting column to class
## 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, select(empty_base, -SAMPID)):
## Column class mismatch for 'NAT_LITHPIND'. Converting column to class
## 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, select(empty_base, -SAMPID)):
## Column class mismatch for 'NAT_LITHPTAX'. Converting column to class
## 'character'.</code></pre>
<pre><code>## [1] &quot;Done calculating other metrics.&quot;</code></pre>
<pre><code>## Warning in gtools::smartbind(outMet, empty_base): Column class mismatch for
## 'NAT_TOTLNIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outMet, empty_base): Column class mismatch for
## 'NAT_TOTLNTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outMet, empty_base): Column class mismatch for
## 'NAT_PIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outMet, empty_base): Column class mismatch for
## 'NAT_PTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outMet, empty_base): Column class mismatch for
## 'ALIENPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outMet, empty_base): Column class mismatch for
## 'ALIENNTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outMet, empty_base): Column class mismatch for
## 'ALIENPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## [1] &quot;Done calculating native metrics.&quot;
## [1] &quot;Done calculating anomaly metrics.&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(outdf)</code></pre></div>
<pre><code>##   [1] &quot;UID&quot;              &quot;CENTNTAX&quot;         &quot;CENTPIND&quot;        
##   [4] &quot;CENTPTAX&quot;         &quot;CYPRNTAX&quot;         &quot;CYPRPIND&quot;        
##   [7] &quot;CYPRPTAX&quot;         &quot;ICTANTAX&quot;         &quot;ICTAPIND&quot;        
##  [10] &quot;ICTAPTAX&quot;         &quot;NAT_CENTNTAX&quot;     &quot;NAT_CENTPIND&quot;    
##  [13] &quot;NAT_CENTPTAX&quot;     &quot;NAT_CYPRNTAX&quot;     &quot;NAT_CYPRPIND&quot;    
##  [16] &quot;NAT_CYPRPTAX&quot;     &quot;NAT_ICTANTAX&quot;     &quot;NAT_ICTAPIND&quot;    
##  [19] &quot;NAT_ICTAPTAX&quot;     &quot;NAT_TOTLNIND&quot;     &quot;NAT_TOTLNTAX&quot;    
##  [22] &quot;NAT_PTAX&quot;         &quot;NAT_PIND&quot;         &quot;SALMPIND&quot;        
##  [25] &quot;SALMNTAX&quot;         &quot;SALMPTAX&quot;         &quot;CATOPIND&quot;        
##  [28] &quot;CATONTAX&quot;         &quot;CATOPTAX&quot;         &quot;RBCATOPIND&quot;      
##  [31] &quot;RBCATONTAX&quot;       &quot;RBCATOPTAX&quot;       &quot;NAT_SALMPIND&quot;    
##  [34] &quot;NAT_SALMNTAX&quot;     &quot;NAT_SALMPTAX&quot;     &quot;NAT_CATOPIND&quot;    
##  [37] &quot;NAT_CATONTAX&quot;     &quot;NAT_CATOPTAX&quot;     &quot;NAT_RBCATOPIND&quot;  
##  [40] &quot;NAT_RBCATONTAX&quot;   &quot;NAT_RBCATOPTAX&quot;   &quot;TOTLNTAX&quot;        
##  [43] &quot;TOTLNIND&quot;         &quot;INTLINVNTAX&quot;      &quot;INTLINVPIND&quot;     
##  [46] &quot;INTLINVPTAX&quot;      &quot;INTLLOTNTAX&quot;      &quot;INTLLOTPIND&quot;     
##  [49] &quot;INTLLOTPTAX&quot;      &quot;INTLNTAX&quot;         &quot;INTLPIND&quot;        
##  [52] &quot;INTLPTAX&quot;         &quot;INTLRHEONTAX&quot;     &quot;INTLRHEOPIND&quot;    
##  [55] &quot;INTLRHEOPTAX&quot;     &quot;MTOLNTAX&quot;         &quot;MTOLPIND&quot;        
##  [58] &quot;MTOLPTAX&quot;         &quot;NTOLBENTNTAX&quot;     &quot;NTOLBENTPIND&quot;    
##  [61] &quot;NTOLBENTPTAX&quot;     &quot;NTOLINVNTAX&quot;      &quot;NTOLINVPIND&quot;     
##  [64] &quot;NTOLINVPTAX&quot;      &quot;NTOLNTAX&quot;         &quot;NTOLPIND&quot;        
##  [67] &quot;NTOLPTAX&quot;         &quot;TOLRNTAX&quot;         &quot;TOLRPIND&quot;        
##  [70] &quot;TOLRPTAX&quot;         &quot;WTD_TV&quot;           &quot;NAT_INTLINVNTAX&quot; 
##  [73] &quot;NAT_INTLINVPIND&quot;  &quot;NAT_INTLINVPTAX&quot;  &quot;NAT_INTLLOTNTAX&quot; 
##  [76] &quot;NAT_INTLLOTPIND&quot;  &quot;NAT_INTLLOTPTAX&quot;  &quot;NAT_INTLNTAX&quot;    
##  [79] &quot;NAT_INTLPIND&quot;     &quot;NAT_INTLPTAX&quot;     &quot;NAT_INTLRHEONTAX&quot;
##  [82] &quot;NAT_INTLRHEOPIND&quot; &quot;NAT_INTLRHEOPTAX&quot; &quot;NAT_MTOLNTAX&quot;    
##  [85] &quot;NAT_MTOLPIND&quot;     &quot;NAT_MTOLPTAX&quot;     &quot;NAT_NTOLBENTNTAX&quot;
##  [88] &quot;NAT_NTOLBENTPIND&quot; &quot;NAT_NTOLBENTPTAX&quot; &quot;NAT_NTOLINVNTAX&quot; 
##  [91] &quot;NAT_NTOLINVPIND&quot;  &quot;NAT_NTOLINVPTAX&quot;  &quot;NAT_NTOLNTAX&quot;    
##  [94] &quot;NAT_NTOLPIND&quot;     &quot;NAT_NTOLPTAX&quot;     &quot;NAT_TOLRNTAX&quot;    
##  [97] &quot;NAT_TOLRPIND&quot;     &quot;NAT_TOLRPTAX&quot;     &quot;NAT_WTD_TV&quot;      
## [100] &quot;INTLCARNNTAX&quot;     &quot;INTLCARNPIND&quot;     &quot;INTLCARNPTAX&quot;    
## [103] &quot;NTOLCARNNTAX&quot;     &quot;NTOLCARNPIND&quot;     &quot;NTOLCARNPTAX&quot;    
## [106] &quot;NAT_INTLCARNNTAX&quot; &quot;NAT_INTLCARNPIND&quot; &quot;NAT_INTLCARNPTAX&quot;
## [109] &quot;NAT_NTOLCARNNTAX&quot; &quot;NAT_NTOLCARNPIND&quot; &quot;NAT_NTOLCARNPTAX&quot;
## [112] &quot;INTLMIGRNTAX&quot;     &quot;INTLMIGRPIND&quot;     &quot;INTLMIGRPTAX&quot;    
## [115] &quot;NAT_INTLMIGRNTAX&quot; &quot;NAT_INTLMIGRPIND&quot; &quot;NAT_INTLMIGRPTAX&quot;
## [118] &quot;BENTINVNTAX&quot;      &quot;BENTINVPIND&quot;      &quot;BENTINVPTAX&quot;     
## [121] &quot;CARNNTAX&quot;         &quot;CARNPIND&quot;         &quot;CARNPTAX&quot;        
## [124] &quot;HERBNTAX&quot;         &quot;HERBPIND&quot;         &quot;HERBPTAX&quot;        
## [127] &quot;INVNTAX&quot;          &quot;INVPIND&quot;          &quot;INVPTAX&quot;         
## [130] &quot;OMNINTAX&quot;         &quot;OMNIPIND&quot;         &quot;OMNIPTAX&quot;        
## [133] &quot;NAT_BENTINVNTAX&quot;  &quot;NAT_BENTINVPIND&quot;  &quot;NAT_BENTINVPTAX&quot; 
## [136] &quot;NAT_CARNNTAX&quot;     &quot;NAT_CARNPIND&quot;     &quot;NAT_CARNPTAX&quot;    
## [139] &quot;NAT_HERBNTAX&quot;     &quot;NAT_HERBPIND&quot;     &quot;NAT_HERBPTAX&quot;    
## [142] &quot;NAT_INVNTAX&quot;      &quot;NAT_INVPIND&quot;      &quot;NAT_INVPTAX&quot;     
## [145] &quot;NAT_OMNINTAX&quot;     &quot;NAT_OMNIPIND&quot;     &quot;NAT_OMNIPTAX&quot;    
## [148] &quot;LITHNTAX&quot;         &quot;LITHPIND&quot;         &quot;LITHPTAX&quot;        
## [151] &quot;LOTNTAX&quot;          &quot;LOTPIND&quot;          &quot;LOTPTAX&quot;         
## [154] &quot;RHEONTAX&quot;         &quot;RHEOPIND&quot;         &quot;RHEOPTAX&quot;        
## [157] &quot;NAT_LITHNTAX&quot;     &quot;NAT_LITHPIND&quot;     &quot;NAT_LITHPTAX&quot;    
## [160] &quot;NAT_LOTNTAX&quot;      &quot;NAT_LOTPIND&quot;      &quot;NAT_LOTPTAX&quot;     
## [163] &quot;NAT_RHEONTAX&quot;     &quot;NAT_RHEOPIND&quot;     &quot;NAT_RHEOPTAX&quot;    
## [166] &quot;MIGRNTAX&quot;         &quot;MIGRPIND&quot;         &quot;MIGRPTAX&quot;        
## [169] &quot;NAT_MIGRNTAX&quot;     &quot;NAT_MIGRPIND&quot;     &quot;NAT_MIGRPTAX&quot;    
## [172] &quot;COLDNTAX&quot;         &quot;COLDPIND&quot;         &quot;COLDPTAX&quot;        
## [175] &quot;NAT_COLDNTAX&quot;     &quot;NAT_COLDPIND&quot;     &quot;NAT_COLDPTAX&quot;    
## [178] &quot;ALIENNTAX&quot;        &quot;ALIENPIND&quot;        &quot;ALIENPTAX&quot;       
## [181] &quot;ANOMPIND&quot;</code></pre>
<p>The definitions of all metrics can be found in <strong>NRSA_Fish_Metric_Descriptions.pdf</strong> found in this package.</p>
</div>
<div id="subsets-of-metrics" class="section level2">
<h2>2.2 Subsets of metrics</h2>
<p>Suppose only tolerance-related and taxonomic metrics are of interest. Then we need only to run the <code>calcFishTolMets()</code> and <code>calcFishTaxMets()</code> functions. For each of these functions, if we include a variable for <code>nonnat</code> in the input data frame, native status versions of metrics will also be calculated. For the purposes of demonstration, we will included this non-native status variable for the tolerance metrics but not the taxonomy metrics.</p>
<div id="taxonomy-metrics" class="section level3">
<h3>Taxonomy metrics</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">outTax &lt;-<span class="st"> </span><span class="kw">calcFishTaxMets</span>(fishEx, fishTaxa, <span class="dt">sampID=</span><span class="st">'UID'</span>, <span class="dt">dist=</span><span class="st">'IS_DISTINCT'</span>,
                          <span class="dt">ct=</span><span class="st">'FINAL_CT'</span>, <span class="dt">taxa_id=</span><span class="st">'TAXA_ID'</span>, <span class="dt">family=</span><span class="st">'FAMILY'</span>, <span class="dt">genus=</span><span class="st">'GENUS'</span>,
                          <span class="dt">comname=</span><span class="st">'FINAL_NAME'</span>)</code></pre></div>
<pre><code>## [1] &quot;Cannot calculate native status-based metrics without a non-native status variable. Will calculate other metrics.&quot;</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'ICTAPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'ICTANTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'ICTAPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'CENTPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'CENTNTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'CENTPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'CYPRPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'CYPRNTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'CYPRPTAX'. Converting column to class 'character'.</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(outTax)</code></pre></div>
<pre><code>##  [1] &quot;UID&quot;        &quot;CENTNTAX&quot;   &quot;CENTPIND&quot;   &quot;CENTPTAX&quot;   &quot;CYPRNTAX&quot;  
##  [6] &quot;CYPRPIND&quot;   &quot;CYPRPTAX&quot;   &quot;ICTANTAX&quot;   &quot;ICTAPIND&quot;   &quot;ICTAPTAX&quot;  
## [11] &quot;SALMPIND&quot;   &quot;SALMNTAX&quot;   &quot;SALMPTAX&quot;   &quot;CATOPIND&quot;   &quot;CATONTAX&quot;  
## [16] &quot;CATOPTAX&quot;   &quot;RBCATOPIND&quot; &quot;RBCATONTAX&quot; &quot;RBCATOPTAX&quot; &quot;TOTLNTAX&quot;  
## [21] &quot;TOTLNIND&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(outTax)</code></pre></div>
<pre><code>##     UID CENTNTAX CENTPIND CENTPTAX CYPRNTAX CYPRPIND CYPRPTAX ICTANTAX
## 1 10000        1     3.03     9.09        6    93.33    54.55        0
## 2 10001        1     5.26     9.09        4    36.84    36.36        1
##   ICTAPIND ICTAPTAX SALMPIND SALMNTAX SALMPTAX CATOPIND CATONTAX CATOPTAX
## 1        0        0        0        0        0        0        0        0
## 2    12.28     9.09        0        0        0        0        0        0
##   RBCATOPIND RBCATONTAX RBCATOPTAX TOTLNTAX TOTLNIND
## 1          0          0          0       11      330
## 2          0          0          0       11      228</code></pre>
</div>
<div id="tolerance-metrics" class="section level3">
<h3>Tolerance metrics</h3>
<p>For the tolerance metrics, we will suppose we only have trait information for or care about tolerance and habitat, so only metrics based on tolerance alone and tolerance in combination with habitat will be calculated. Since we will also specify the name of the non-native status variable in the input dataset, native versions of metrics will also be calculated.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">outTol &lt;-<span class="st"> </span><span class="kw">calcFishTolMets</span>(fishEx, fishTaxa, <span class="dt">sampID=</span><span class="st">'UID'</span>, <span class="dt">dist=</span><span class="st">'IS_DISTINCT'</span>,
                          <span class="dt">ct=</span><span class="st">'FINAL_CT'</span>, <span class="dt">taxa_id=</span><span class="st">'TAXA_ID'</span>, <span class="dt">tol=</span><span class="st">'TOLERANCE_NRSA'</span>,
                          <span class="dt">tolval=</span><span class="st">'TOL_VAL_EMAPW'</span>, <span class="dt">nonnat=</span><span class="st">'NON_NATIVE'</span>, 
                          <span class="dt">habitat=</span><span class="st">'HABITAT_NRSA'</span>)</code></pre></div>
<pre><code>## [1] &quot;Optional traits are missing from the taxa list. Any tolerance metrics also using these traits will not be calculated: TROPHIC,MIGRATORY,VELOCITY&quot;</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'INTLNTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'INTLPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'INTLPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'MTOLNTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'MTOLPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'MTOLPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NTOLNTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NTOLPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NTOLPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'TOLRNTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'TOLRPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'TOLRPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'WTD_TV'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_INTLNTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_INTLPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_INTLPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_MTOLNTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_MTOLPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_MTOLPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_NTOLNTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_NTOLPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_NTOLPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_TOLRNTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_TOLRPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_TOLRPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_WTD_TV'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_PIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_PTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_TOTLNIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_TOTLNTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NTOLBENTNTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NTOLBENTPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NTOLBENTPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_NTOLBENTNTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_NTOLBENTPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(outWide.1, empty_base): Column class mismatch
## for 'NAT_NTOLBENTPTAX'. Converting column to class 'character'.</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(outTol)</code></pre></div>
<pre><code>##  [1] &quot;UID&quot;              &quot;INTLNTAX&quot;         &quot;INTLPIND&quot;        
##  [4] &quot;INTLPTAX&quot;         &quot;MTOLNTAX&quot;         &quot;MTOLPIND&quot;        
##  [7] &quot;MTOLPTAX&quot;         &quot;NTOLBENTNTAX&quot;     &quot;NTOLBENTPIND&quot;    
## [10] &quot;NTOLBENTPTAX&quot;     &quot;NTOLNTAX&quot;         &quot;NTOLPIND&quot;        
## [13] &quot;NTOLPTAX&quot;         &quot;TOLRNTAX&quot;         &quot;TOLRPIND&quot;        
## [16] &quot;TOLRPTAX&quot;         &quot;WTD_TV&quot;           &quot;NAT_INTLNTAX&quot;    
## [19] &quot;NAT_INTLPIND&quot;     &quot;NAT_INTLPTAX&quot;     &quot;NAT_MTOLNTAX&quot;    
## [22] &quot;NAT_MTOLPIND&quot;     &quot;NAT_MTOLPTAX&quot;     &quot;NAT_NTOLBENTNTAX&quot;
## [25] &quot;NAT_NTOLBENTPIND&quot; &quot;NAT_NTOLBENTPTAX&quot; &quot;NAT_NTOLNTAX&quot;    
## [28] &quot;NAT_NTOLPIND&quot;     &quot;NAT_NTOLPTAX&quot;     &quot;NAT_TOLRNTAX&quot;    
## [31] &quot;NAT_TOLRPIND&quot;     &quot;NAT_TOLRPTAX&quot;     &quot;NAT_TOTLNIND&quot;    
## [34] &quot;NAT_TOTLNTAX&quot;     &quot;NAT_WTD_TV&quot;       &quot;NAT_PTAX&quot;        
## [37] &quot;NAT_PIND&quot;         &quot;TOTLNTAX&quot;         &quot;TOTLNIND&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(outTol)</code></pre></div>
<pre><code>##     UID INTLNTAX INTLPIND INTLPTAX MTOLNTAX MTOLPIND MTOLPTAX NTOLBENTNTAX
## 1 10000        0        0        0        4    15.45    36.36            2
## 2 10001        1     4.39     9.09        5    21.93    45.45            3
##   NTOLBENTPIND NTOLBENTPTAX NTOLNTAX NTOLPIND NTOLPTAX TOLRNTAX TOLRPIND
## 1         7.27        18.18        4    15.45    36.36        7    84.55
## 2        18.42        27.27        6    26.32    54.55        5    73.68
##   TOLRPTAX WTD_TV NAT_INTLNTAX NAT_INTLPIND NAT_INTLPTAX NAT_MTOLNTAX
## 1    63.64   7.32            0            0            0            4
## 2    45.45   7.39            1         4.39         9.09            5
##   NAT_MTOLPIND NAT_MTOLPTAX NAT_NTOLBENTNTAX NAT_NTOLBENTPIND
## 1        15.55        44.44                2             7.32
## 2        21.93        45.45                3            18.42
##   NAT_NTOLBENTPTAX NAT_NTOLNTAX NAT_NTOLPIND NAT_NTOLPTAX NAT_TOLRNTAX
## 1            22.22            4        15.55        44.44            5
## 2            27.27            6        26.32        54.55            5
##   NAT_TOLRPIND NAT_TOLRPTAX NAT_TOTLNIND NAT_TOTLNTAX NAT_WTD_TV NAT_PTAX
## 1        84.45        55.56          328            9       7.31    81.82
## 2        73.68        45.45          228           11       7.39      100
##   NAT_PIND TOTLNTAX TOTLNIND
## 1    99.39       11      330
## 2      100       11      228</code></pre>
<hr />
</div>
</div>
</div>
<div id="calculate-only-fish-mmi-metrics-and-mmi" class="section level1">
<h1>3 Calculate only fish MMI metrics and MMI</h1>
<p>First, we will need to create a data frame containing the three-letter code for the 9 aggregated ecoregions and add that to the input data frame (<code>indata</code>). Then run the function <code>calcNRSA_FishMMImets()</code>, followed by <code>calcFishMMI()</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">eco9 &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">UID=</span><span class="kw">c</span>(<span class="dv">10000</span>,<span class="dv">10001</span>), <span class="dt">ECO9=</span><span class="kw">c</span>(<span class="st">'CPL'</span>,<span class="st">'WMT'</span>),<span class="dt">stringsAsFactors=</span>F)

fishEx.<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">merge</span>(fishEx, eco9, <span class="dt">by=</span><span class="st">'UID'</span>)</code></pre></div>
<div id="calculate-fish-mmi-metrics" class="section level2">
<h2>3.1 Calculate fish MMI metrics</h2>
<p>This function calculates metrics for only the MMI for the ecoregion of each site.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">outMets &lt;-<span class="st"> </span><span class="kw">calcNRSA_FishMMImets</span>(fishEx.<span class="dv">1</span>,fishTaxa, <span class="st">&quot;UID&quot;</span>, <span class="dt">ecoreg=</span><span class="st">'ECO9'</span>
                                 ,<span class="dt">dist=</span><span class="st">&quot;IS_DISTINCT&quot;</span>,<span class="dt">ct=</span><span class="st">&quot;FINAL_CT&quot;</span>
                                 ,<span class="dt">taxa_id=</span><span class="st">'TAXA_ID'</span>,<span class="dt">tol=</span><span class="st">'TOLERANCE_NRSA'</span>
                                 ,<span class="dt">vel=</span><span class="st">'VEL_NRSA'</span>, <span class="dt">habitat=</span><span class="st">'HABITAT_NRSA'</span>
                                 ,<span class="dt">trophic=</span><span class="st">'TROPHIC_NRSA'</span>, <span class="dt">migr=</span><span class="st">'MIGR_NRSA'</span>, <span class="dt">nonnat=</span><span class="st">'NON_NATIVE'</span>
                                 ,<span class="dt">reprod=</span><span class="st">'REPROD_NRSA'</span>, <span class="dt">family=</span><span class="st">'FAMILY'</span>, <span class="dt">genus=</span><span class="st">'GENUS'</span>
                                 ,<span class="dt">comname=</span><span class="st">'FINAL_NAME'</span>)</code></pre></div>
<pre><code>## Warning in gtools::smartbind(., empty_base): Column class mismatch for
## 'ALIENPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(., empty_base): Column class mismatch for
## 'LOTPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(., empty_base): Column class mismatch for
## 'LITHPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(., empty_base): Column class mismatch for
## 'NAT_TOTLNTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(., empty_base): Column class mismatch for
## 'TOLRNTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(., empty_base): Column class mismatch for
## 'INVPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(., empty_base): Column class mismatch for
## 'ALIENNTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(., empty_base): Column class mismatch for
## 'NAT_RHEOPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(., empty_base): Column class mismatch for
## 'LITHPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(., empty_base): Column class mismatch for
## 'NTOLPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(., empty_base): Column class mismatch for
## 'INVNTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(., empty_base): Column class mismatch for
## 'NAT_CYPRPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(., empty_base): Column class mismatch for
## 'LOTNTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(., empty_base): Column class mismatch for
## 'NAT_INTLPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(., empty_base): Column class mismatch for
## 'NAT_CARNNTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(., empty_base): Column class mismatch for
## 'NAT_PTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(., empty_base): Column class mismatch for
## 'NAT_CENTNTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(., empty_base): Column class mismatch for
## 'NAT_NTOLBENTPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(., empty_base): Column class mismatch for
## 'NAT_LITHPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(., empty_base): Column class mismatch for
## 'TOLRPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(., empty_base): Column class mismatch for
## 'INVPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(., empty_base): Column class mismatch for
## 'NAT_PIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(., empty_base): Column class mismatch for
## 'CYPRPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(., empty_base): Column class mismatch for
## 'RHEOPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(., empty_base): Column class mismatch for
## 'LITHNTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(., empty_base): Column class mismatch for
## 'NAT_NTOLNTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(., empty_base): Column class mismatch for
## 'HERBPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(., empty_base): Column class mismatch for
## 'NAT_ICTAPIND'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(., empty_base): Column class mismatch for
## 'RHEONTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(., empty_base): Column class mismatch for
## 'INTLPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(., empty_base): Column class mismatch for
## 'CARNNTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(., empty_base): Column class mismatch for
## 'CYPRNTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(., empty_base): Column class mismatch for
## 'INTLLOTNTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(., empty_base): Column class mismatch for
## 'NTOLNTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(., empty_base): Column class mismatch for
## 'INTLINVPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(., empty_base): Column class mismatch for
## 'INTLLOTPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(., empty_base): Column class mismatch for
## 'NAT_HERBPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(., empty_base): Column class mismatch for
## 'CENTPTAX'. Converting column to class 'character'.</code></pre>
<pre><code>## Warning in gtools::smartbind(., empty_base): Column class mismatch for
## 'BENTINVPTAX'. Converting column to class 'character'.</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(outMets)</code></pre></div>
<pre><code>##     UID ECO9 INTLLOTPTAX INVPTAX LITHPIND LITHPTAX LOTPIND TOLRNTAX
## 1 10000  CPL        &lt;NA&gt;   18.18    37.88     &lt;NA&gt;   96.36        7
## 2 10001  WMT        9.09    &lt;NA&gt;     &lt;NA&gt;    27.27    &lt;NA&gt;        5
##   NAT_HERBPTAX ALIENPIND NAT_TOTLNTAX NAT_PIND RBCATONTAX INTLMIGRPTAX
## 1         &lt;NA&gt;      0.61            9     &lt;NA&gt;          0            0
## 2         9.09      &lt;NA&gt;           11      100       &lt;NA&gt;         &lt;NA&gt;
##   NAT_MIGRPTAX NAT_CATOPIND TOTLNIND
## 1         &lt;NA&gt;         &lt;NA&gt;      330
## 2            0            0      228</code></pre>
<p>Note that there are missing values for metrics that are not included in the MMI for a given ecoregion. Any given UID should only have values for 8 metrics, which is the case in our example.</p>
</div>
<div id="calculate-nrsa-fish-mmi" class="section level2">
<h2>3.2 Calculate NRSA fish MMI</h2>
<p>Now use the output of the function above to calculate the fish MMI. To calculate the fish MMI, we have to supply the log10 of watershed area because some metrics in each MMI are adjusted for watershed size. Using the approach above, we create a data frame with this information and merge it with the <code>outMets</code> data frame.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">wsarea &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">UID=</span><span class="kw">c</span>(<span class="dv">10000</span>,<span class="dv">10001</span>), <span class="dt">LWSAREA=</span><span class="kw">c</span>(<span class="fl">2.1</span>, <span class="fl">3.5</span>), <span class="dt">stringsAsFactors=</span>F)

outMets.<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">merge</span>(outMets, wsarea, <span class="dt">by=</span><span class="st">'UID'</span>)

outMMI &lt;-<span class="st"> </span><span class="kw">calcFishMMI</span>(outMets.<span class="dv">1</span>, <span class="dt">sampID=</span><span class="st">'UID'</span>, <span class="dt">ecoreg=</span><span class="st">'ECO9'</span>, <span class="dt">lwsarea=</span><span class="st">'LWSAREA'</span>)</code></pre></div>
<pre><code>## [1] &quot;Metric scores calculated.&quot;
## [1] &quot;Done calculating MMI score.&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(outMMI)</code></pre></div>
<pre><code>##     UID ECO9 MMI_FISH ALIENPIND_WS ALIENPIND_WS_PT INTLLOTPTAX_WS
## 1 10000  CPL    43.55        0.455            9.36             NA
## 2 10001  WMT    56.69           NA              NA         -26.48
##   INTLLOTPTAX_WS_PT INTLMIGRPTAX_PT INVPTAX_PT LITHPIND_WS LITHPIND_WS_PT
## 1                NA               0       1.52       -8.07           6.36
## 2              4.56              NA         NA          NA             NA
##   LITHPTAX_PT LOTPIND_WS LOTPIND_WS_PT NAT_CATOPIND_PT NAT_HERBPTAX_PT
## 1          NA     24.533          9.41              NA              NA
## 2         0.3         NA            NA              10            7.27
##   NAT_MIGRPTAX_WS NAT_MIGRPTAX_WS_PT NAT_PIND_PT NAT_TOTLNTAX_WS
## 1              NA                 NA          NA          -7.965
## 2         -37.377               3.22          10           6.387
##   NAT_TOTLNTAX_WS_PT RBCATONTAX_PT TOLRNTAX_PT TOLRNTAX_WS TOLRNTAX_WS_PT
## 1               3.31             0          NA       1.894           4.88
## 2              10.00            NA           0          NA             NA</code></pre>
<p>Again, note that there are missing values for the metrics and metric scores not included in the MMI for a given site. If there is a mix of ecoregions in the input dataset, there will be these missing values for some metrics and metric scores.</p>
</div>
</div>
<div id="assign-nrsa-fish-condition" class="section level1">
<h1>4 Assign NRSA fish condition</h1>
<p>Using the output from , we can now assign fish assemblage condition to these sites using the  function. Additional variables, including watershed area (km2) and total number of individuals collected would be required to assign condition only if we had missing MMI values. Since we do not, we do not need to add these variables. See the example for  to see examples for that scenario.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">outCond &lt;-<span class="st"> </span><span class="kw">assignFishCondition</span>(outMMI, <span class="dt">sampID=</span><span class="st">'UID'</span>, <span class="dt">ecoreg=</span><span class="st">'ECO9'</span>, <span class="dt">mmi=</span><span class="st">'MMI_FISH'</span>)

outCond</code></pre></div>
<pre><code>##     UID FISH_MMI_COND ECO9 MMI_FISH ALIENPIND_WS ALIENPIND_WS_PT
## 1 10000          Poor  CPL    43.55        0.455            9.36
## 2 10001          Poor  WMT    56.69           NA              NA
##   INTLLOTPTAX_WS INTLLOTPTAX_WS_PT INTLMIGRPTAX_PT INVPTAX_PT LITHPIND_WS
## 1             NA                NA               0       1.52       -8.07
## 2         -26.48              4.56              NA         NA          NA
##   LITHPIND_WS_PT LITHPTAX_PT LOTPIND_WS LOTPIND_WS_PT NAT_CATOPIND_PT
## 1           6.36          NA     24.533          9.41              NA
## 2             NA         0.3         NA            NA              10
##   NAT_HERBPTAX_PT NAT_MIGRPTAX_WS NAT_MIGRPTAX_WS_PT NAT_PIND_PT
## 1              NA              NA                 NA          NA
## 2            7.27         -37.377               3.22          10
##   NAT_TOTLNTAX_WS NAT_TOTLNTAX_WS_PT RBCATONTAX_PT TOLRNTAX_PT TOLRNTAX_WS
## 1          -7.965               3.31             0          NA       1.894
## 2           6.387              10.00            NA           0          NA
##   TOLRNTAX_WS_PT
## 1           4.88
## 2             NA</code></pre>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
